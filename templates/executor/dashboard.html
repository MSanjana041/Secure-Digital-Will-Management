<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executor Portal - LegacyVault</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_cards.css') }}">
</head>

<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <div style="background: var(--primary-gold); padding: 5px; border-radius: 4px;">üõ°Ô∏è</div>
            <div>
                <h1>LegacyVault</h1>
                <span>Secure Digital Will Management</span>
            </div>
        </div>
        <div class="user-menu">
            <span class="role-badge">Executor</span>
            <div class="profile-dropdown">
                <div
                    style="width: 32px; height: 32px; background: var(--primary-gold); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary-blue);">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                </div>
                <span class="profile-name">{{ session.get('username', 'Executor') }}</span>
                <div class="dropdown-content">
                    <a href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="dashboard-header">
        <div class="container">
            <div class="dashboard-title">
                <h2>Executor Portal</h2>
                <p class="dashboard-subtitle">Manage will release authorizations and verify compliance with testament
                    conditions.</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Notification Ribbon (Conditional) -->
        {% if pending_count > 0 %}
        <div
            style="background: rgba(197, 160, 89, 0.2); border-left: 5px solid #8e6d2b; padding: 1rem; margin-bottom: 2rem; border-radius: 4px; display: flex; align-items: center; gap: 1rem;">
            <div style="color: #8e6d2b; font-size: 1.2rem;">‚ö†Ô∏è</div>
            <div>
                <strong style="color: #5d4037;">Action Required</strong>
                <p style="margin: 0; font-size: 0.9rem; color: #222f3e; font-weight: 500;">You have {{ pending_count }}
                    will release request(s) pending
                    your review.</p>
            </div>
        </div>
        {% endif %}

        <!-- Stats Grid -->
        <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
            <div class="stat-card">
                <span class="stat-label">Wills Assigned</span>
                <span class="stat-value">{{ wills_assigned_count }}</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Released</span>
                <span class="stat-value">{{ released_count }}</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Pending Action</span>
                <span class="stat-value pending">{{ pending_count }}</span>
            </div>
        </div>

        <!-- Actions Grid -->
        <h3 style="margin-bottom: 1.5rem; color: var(--primary-blue);">Executor Actions</h3>
        <div class="action-grid" style="grid-template-columns: repeat(3, 1fr);">
            <!-- Authorize Release (Primary Action) -->
            <a href="/authorize-release" class="action-card">
                <div class="card-icon" style="background: rgba(197, 160, 89, 0.1); color: var(--primary-gold);">üîë</div>
                <div class="card-content">
                    <h3>Authorize Will Release <span class="status-badge write-access">Write Access</span></h3>
                    <p>Manage release protocols and authorize testament access for beneficiaries.</p>
                </div>
            </a>

            <!-- View Testaments (Secondary) -->
            <a href="/view-will" class="action-card">
                <div class="card-icon">üìÑ</div>
                <div class="card-content">
                    <h3>View Testaments <span class="status-badge read-only">After Release</span></h3>
                    <p>Access testaments and documents only after release conditions are fully met.</p>
                </div>
            </a>

            <!-- Audit Trail -->
            <a href="/audit-trail" class="action-card">
                <div class="card-icon">üõ°Ô∏è</div>
                <div class="card-content">
                    <h3>Audit Trail <span class="status-badge read-only">Read Only</span></h3>
                    <p>Monitor all access attempts, authorization events, and system logs.</p>
                </div>
            </a>
        </div>
    </div>
</body>

</html>